<app-nav-bar fxFlex="18"></app-nav-bar>
<div fxFlex="auto" id="container-dash" fxLayout="column">
  <div
    fxFlex="80"
    fxLayout="column"
    style="background-color: white; width: 95%"
  >
    <app-top-bar></app-top-bar>
    <div
      fxFlex="80"
      style="
        display: inline-grid;
        background-color: rgba(127, 255, 212, 0.623);
        width: 85%;
        margin: auto;
      "
    >
      <mat-form-field>
        <mat-label>Filter</mat-label>
        <input
          matInput
          (keyup)="applyFilter($event)"
          placeholder="Ex. bmacalester"
          #input
        />
      </mat-form-field>

      <div style="overflow: auto">
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          style="overflow: auto"
        >
          <!-- AVATAR USER-->
          <ng-container matColumnDef="avatar">
            <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
            <td mat-cell *matCellDef="let row">
              <img
                mat-card-image
                [src]="showImgUser(row)"
                onerror="this.onerror = null; this.src='https://programacion.net/files/article/20161110041116_image-not-found.png'"
                alt="Photo of a user"
                class="avatar-img"
              />
            </td>
          </ng-container>

          <!-- ID Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>id</th>
            <td mat-cell *matCellDef="let row">{{ row.id }}</td>
          </ng-container>

          <!-- author Column -->
          <ng-container matColumnDef="author">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>author</th>
            <td mat-cell *matCellDef="let row">{{ row.username }}</td>
          </ng-container>

          <!-- create_account Column -->
          <ng-container matColumnDef="create_account">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              create_account
            </th>
            <td mat-cell *matCellDef="let row">
              {{ row.createdAt | date : "dd/MM/yyyy" }}
            </td>
          </ng-container>

          <!-- state of account of user Column -->
          <ng-container matColumnDef="state">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>state</th>
            <td mat-cell *matCellDef="let row">
              {{ row.enabled ? "active" : "inactive/ban" }}
              <span
                [ngStyle]="{
                  'background-color': row.enabled ? 'green' : 'red',
                  'border-radius': '50%',
                  display: 'inline-block',
                  height: '10px',
                  width: '10px',
                  'margin-right': '5px'
                }"
              ></span>
            </td>
          </ng-container>

          <!-- roles of user Column -->
          <ng-container matColumnDef="roles">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>roles</th>
            <td mat-cell *matCellDef="let row">{{ row.roles }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">
              No data matching the filter "{{ input.value }}"
            </td>
          </tr>
        </table>

        <!-- <mat-paginator
          [length]="totalPages"
          [pageSize]="10"
          (page)="showListUser($event.pageIndex)"
          [showFirstLastButtons]="true"
        >
          <button mat-icon-button (click)="goToPreviousPage()">
            <mat-icon>keyboard_arrow_left</mat-icon>
          </button>
          <button mat-icon-button (click)="goToNextPage()">
            <mat-icon>keyboard_arrow_right</mat-icon>
          </button>
        </mat-paginator> -->

        <button
          [value]="pageActual - 1"
          (click)="backPage()"
          [ngStyle]="{ color: 'white' }"
        >
          <i
            class="fas fa-arrow-alt-circle-left"
            ng-reflect-ng-class="opacity-75"
          ></i>
        </button>
        {{ pageActual }}|{{ totalPages }}
        <button
          [value]="pageActual + 1"
          (click)="nextPage()"
          [ngStyle]="{ color: 'white' }"
        >
          <i
            class="fas fa-arrow-alt-circle-right"
            ng-reflect-ng-class="opacity-75"
          ></i>
        </button>
      </div>
    </div>
  </div>
</div>
